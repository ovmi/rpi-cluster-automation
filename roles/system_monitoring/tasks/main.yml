---
- name: Include tasks for installing iperf3 on all nodes
  ansible.builtin.include_tasks: install.yml

- name: Include tasks for starting iperf3 server
  ansible.builtin.include_tasks: server.yml
  when: inventory_hostname in ['localhost', 'rpi-node0']

- name: Include tasks for running iperf3 client on worker nodes
  ansible.builtin.include_tasks: client.yml
  when: "'workers' in group_names"